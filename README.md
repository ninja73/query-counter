# Query-counter

#### Технологии, сборка и запуск

Основной стек:
[Golang](https://golang.org/)

Собрать приложение: 'go build'

Пример запуска приложения:
'go run ./ --input test-input.log'

Описание параметров запуска:

- --input - путь до файла с запросами
- --output - путь до файла с агрегированными запросами
- --cache-size - размер кэша
- --db - путь до файла где хранится временные данные

Описание работы:

Данные из файла читаются по строчно и обрабатываются в нескольких потоках.
Часть данных помещается в cache (частично реализован LRU) в RAM. Для инкремента данных используются atomic.AddUint64.
Устаревшие данные выталкиваются в DB и записываются в один поток.
DB хранится в файловой системе, для хранения данных использовался алгоритм B-tree.
По окончанию работы, данные сбрасываются в output файл.

#### Замечания и дальнейшие доработки

1. Покрыть код тестами
2. Возможность вставки пачками.
3. Вынести часть параметров в конфигурационный файл
4. Рассмотреть другие алгоритмы хранения данных (LSM tree, B⁺-tree и т.п.).
